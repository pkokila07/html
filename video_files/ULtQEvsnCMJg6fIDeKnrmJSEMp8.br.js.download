var __assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(o){if(e)throw new TypeError("Generator is already executing.");while(f&&(f=0,o[0]&&(r=0)),r)try{if(e=1,u&&(i=o[0]&2?u["return"]:o[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,o[1])).done)return i;(u=0,i)&&(o=[o[0]&2,i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++;u=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(o[0]===6&&r.label<i[1]){r.label=i[1];i=o;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(o);break}i[2]&&r.ops.pop();r.trys.pop();continue}o=t.call(n,r)}catch(s){o=[6,s];u=0}finally{e=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,u,i,f;return f={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f},MMBasePlayerModule,MMPlayerModule;(function(n){var t=typeof pMMUtils!="undefined"?pMMUtils:null,i=function(){function n(n,t,i,r,u,f,e,o){u===void 0&&(u=0);f===void 0&&(f=-1);e===void 0&&(e=null);o===void 0&&(o=-1);this.setPlayerInfo(n,t,i,r,u,f,e,o);this.createInstJson=this.createInstJson.bind(this);this.logAndDispatchEvent=this.logAndDispatchEvent.bind(this)}return n.prototype.setPlayerInfo=function(n,t,i,r,u,f,e,o){u===void 0&&(u=0);f===void 0&&(f=-1);e===void 0&&(e=null);o===void 0&&(o=-1);this._embedInfo=n;this._startTime=u;this._endTime=f;this._parentElement=t;this._config=i;this._initState=e;this._duration=o;this._instInfo=r?r:{}},n.prototype.logAndDispatchEvent=function(n,t,i){var r,u;(n||t)&&(i||(i={}),i=__assign(__assign(__assign({},i),this._instInfo),{player:this._player}),n&&(r=new CustomEvent(n,{detail:i}),this._player.dispatchEvent(r),typeof(sj_evt===null||sj_evt===void 0?void 0:sj_evt.fire)=="function"&&sj_evt.fire(n,i)),t&&(u=this.createInstJson(t,i),mmLog(JSON.stringify(u))))},n.prototype.createInstJson=function(n,t){if(n){t||(t={});return __assign({T:n},t)}},n.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return this._startTime>0&&typeof this._player.seek=="function"&&this._player.seek(this._startTime),[2]})})},n.prototype.getEmbedInfo=function(){return this._embedInfo},n.prototype.seek=function(){},n.prototype.play=function(){},n.prototype.pause=function(){},n.prototype.updatePlayerInfo=function(n,t,i,r,u,f,e){i===void 0&&(i=null);r===void 0&&(r=0);u===void 0&&(u=-1);f===void 0&&(f=null);e===void 0&&(e=-1);this._embedInfo=n;this._startTime=r;this._endTime=u;t&&(this._instInfo=t);i&&(this._parentElement=i);this._initState=f;this._duration=e},n.prototype.onLoad=function(){var n,i,r,u,f;((r=(i=(n=this._config)===null||n===void 0?void 0:n.instc)===null||i===void 0?void 0:i.eil)===null||r===void 0?void 0:r.indexOf("OnLoad"))!=-1&&typeof(t===null||t===void 0?void 0:t.la)=="function"&&(f=__assign({component:"MMPlayer",instType:"OnLoad"},this._instInfo),t.la("CI.Info","MMPlayer.Event",_G===null||_G===void 0?void 0:_G.IG,f,(u=this._instInfo)===null||u===void 0?void 0:u.extraStaticInfo))},n}();n.MMBasePlayer=i})(MMBasePlayerModule||(MMBasePlayerModule={}));var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(o){if(e)throw new TypeError("Generator is already executing.");while(f&&(f=0,o[0]&&(r=0)),r)try{if(e=1,u&&(i=o[0]&2?u["return"]:o[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,o[1])).done)return i;(u=0,i)&&(o=[o[0]&2,i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++;u=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(o[0]===6&&r.label<i[1]){r.label=i[1];i=o;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(o);break}i[2]&&r.ops.pop();r.trys.pop();continue}o=t.call(n,r)}catch(s){o=[6,s];u=0}finally{e=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,u,i,f;return f={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f},MMHtml5PlayerModule;(function(n){var t=typeof pMMUtils!="undefined"?pMMUtils:null,i=function(n){function i(t,i,r,u,f,e,o,s){f===void 0&&(f=0);e===void 0&&(e=-1);o===void 0&&(o=null);s===void 0&&(s=-1);var h=n.call(this,t,i,r,u,f,e,o,s)||this;return h._const_end="end",h._const_hide="hide",h._const_high="h",h._const_low="l",h._const_mid="m",h._const_muted="muted",h._const_notAvailable="nav",h._const_pause="pause",h._seek=h._seek.bind(h),h.checkPlayingState=h.checkPlayingState.bind(h),h.createHLSVideoPlayer=h.createHLSVideoPlayer.bind(h),h.init=h.init.bind(h),h.mute=h.mute.bind(h),h.muteToggle=h.muteToggle.bind(h),h.onDataLoaded=h.onDataLoaded.bind(h),h.onExitPip=h.onExitPip.bind(h),h.onFullScreen=h.onFullScreen.bind(h),h.onLoadMetadata=h.onLoadMetadata.bind(h),h.onTimeLineSeek=h.onTimeLineSeek.bind(h),h.onVideoClick=h.onVideoClick.bind(h),h.onVideoEnd=h.onVideoEnd.bind(h),h.onVideoLoaded=h.onVideoLoaded.bind(h),h.onVideoTimeUpdate=h.onVideoTimeUpdate.bind(h),h.onVolumeChange=h.onVolumeChange.bind(h),h.onVolumeControl=h.onVolumeControl.bind(h),h.onVolumeControl_KeyBoard=h.onVolumeControl_KeyBoard.bind(h),h.resetPlayerState=h.resetPlayerState.bind(h),h.stopEventAndPreventDefault=h.stopEventAndPreventDefault.bind(h),h.unmute=h.unmute.bind(h),h.updateMuteButtonState=h.updateMuteButtonState.bind(h),h}return __extends(i,n),i.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return this.createPlayer(),[2]})})},i.prototype.resetPlayerState=function(){var i;return __awaiter(this,void 0,void 0,function(){var r;return __generator(this,function(u){switch(u.label){case 0:this._controls&&t.ac(this._controls,this._const_notAvailable);this._timeDisplay_Current&&this._timeDisplay_Duration&&(this._timeDisplay_Current.innerText="00:00",this._timeDisplay_Duration.innerText="00:00");this._progressBarTrack&&(this._progressBarTrack.value=0);((i=this._initState)===null||i===void 0?void 0:i.m)==!0&&(this._player.muted=!0,this._volumeControl&&(this._volumeControl.value=0));this._player.src=this._embedInfo.embedHtml;this._parentElement.appendChild(this._playerContainer);r=this._embedInfo.embedType;switch(r){case"HLS":return[3,1]}return[3,3];case 1:return[4,this.createHLSVideoPlayer(this._embedInfo)];case 2:return u.sent(),[3,3];case 3:return this.play(),n.prototype.init.call(this),[2]}})})},i.prototype.createPlayer=function(){var h=this,i,r,u,f,c=_ge("mmp_t"),n,e,o,s;this._playerContainer=(i=t.gfbc("mmp",c))===null||i===void 0?void 0:i.cloneNode(!0);this._player||(this._player=(r=t.gebt("video",this._playerContainer))===null||r===void 0?void 0:r[0],((u=this._embedInfo)===null||u===void 0?void 0:u.thumbnailUrl)&&t.sa(this._player,"style","background-image: url("+this._embedInfo.thumbnailUrl+")"),((f=this._embedInfo)===null||f===void 0?void 0:f.posterThumbnailUrl)&&t.sa(this._player,"poster",this._embedInfo.posterThumbnailUrl),this._controls=t.gfbc("ctrl",this._playerContainer),this._progressBarContainer=t.gfbc("pb_c",this._controls),this._timeline=t.gfbc("pb_tl",this._progressBarContainer),this._progressBarTrack=t.gfbc("pb_trk",this._progressBarContainer),this._progressBarTrack&&t.sa(this._progressBarTrack,"step","0.01"),n=t.gfbc("ap",this._controls),this._playButton=t.gfbc("pl",n),e=t.gfbc("td",this._controls),this._timeDisplay_Current=t.gfbc("cur",e),this._timeDisplay_Duration=t.gfbc("dur",e),this._fullScreenButton=t.gfbc("fs",n),o=t.gfbc("mc_con",n),this._muteButton=t.gfbc("ctrlbtn",o),s=t.gfbc("volc_c",o),this._volumeControl=t.gfbc("i",s),this._volumeControl_Progress=t.gfbc("p",s),this._player.volume=.5,this.updateMuteButtonState(),this._volumeControl&&(t.sa(this._volumeControl,"step","0.01"),t.sa(this._volumeControl,"max",1),this._volumeControl.value="0.5"),setTimeout(function(){var n;typeof((n=h._playButton)===null||n===void 0?void 0:n.focus)=="function"&&h._playButton.focus()},300));this._player||(this._player=sj_ce("video",null,"mmplayer"));this.resetPlayerState();this.bindEvents()},i.prototype._seek=function(n){typeof n=="number"&&n>=0&&(this._player.currentTime=n);return},i.prototype.bindEvents=function(){var n,t,i,r,u;this._player&&(this._player.addEventListener("playing",this.onVideoStart),this._player.addEventListener("ended",this.onVideoEnd),this._player.addEventListener("error",this.onVideoError),this._player.addEventListener("loadeddata",this.onDataLoaded),this._player.addEventListener("canplaythrough",this.onVideoLoaded),this._player.addEventListener("click",this.onVideoClick),this._player.addEventListener("timeupdate",this.onVideoTimeUpdate),this._player.addEventListener("loadedmetadata",this.onLoadMetadata),this._player.addEventListener("volumechange",this.onVolumeChange),this._player.addEventListener("leavepictureinpicture",this.onExitPip),typeof((n=this._playButton)===null||n===void 0?void 0:n.addEventListener)=="function"&&this._playButton.addEventListener("click",this.onVideoClick),typeof((t=this._fullScreenButton)===null||t===void 0?void 0:t.addEventListener)=="function"&&this._fullScreenButton.addEventListener("click",this.onFullScreen),typeof((i=this._muteButton)===null||i===void 0?void 0:i.addEventListener)=="function"&&(this._muteButton.addEventListener("click",this.muteToggle),this._muteButton.addEventListener("keyup",this.onVolumeControl_KeyBoard)),typeof((r=this._volumeControl)===null||r===void 0?void 0:r.addEventListener)=="function"&&(this._volumeControl.addEventListener("input",this.onVolumeControl),this._volumeControl.addEventListener("keyup",this.onVolumeControl_KeyBoard)),typeof((u=this._progressBarTrack)===null||u===void 0?void 0:u.addEventListener)=="function"&&this._progressBarTrack.addEventListener("input",this.onTimeLineSeek))},i.prototype.createHLSVideoPlayer=function(n){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:if(!(n===null||n===void 0?void 0:n.embedType))throw new Error("No enough info to create a HLSPlayer");return this._hlsPlayer&&typeof this._hlsPlayer.clean=="function"&&this._hlsPlayer.clean(),t=this,[4,HLSVideoPlayer.createAsync(n.embedHtml)];case 1:return(t._hlsPlayer=i.sent(),!this._hlsPlayer)?[3,4]:this._player?[4,this._hlsPlayer.BindVideoElementAsync(this._player)]:[3,3];case 2:i.sent();i.label=3;case 3:return[3,5];case 4:throw new Error("Failed to create HLSPlayer");case 5:return[2]}})})},i.prototype.play=function(){return __awaiter(this,void 0,void 0,function(){var t,i;return __generator(this,function(r){switch(r.label){case 0:if(!this._player)return[2];t=this._player.ended?"CI.Video.Replay":"CI.Video.Play";r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this._player.play()];case 2:return r.sent(),[3,4];case 3:return i=r.sent(),[2];case 4:return n.prototype.logAndDispatchEvent.call(this,SharedEventString===null||SharedEventString===void 0?void 0:SharedEventString.VideoCanvas_VideoPlaying,t),this.checkPlayingState(),[2]}})})},i.prototype.pause=function(){if(this._player){try{this._player.pause()}catch(t){return}n.prototype.logAndDispatchEvent.call(this,SharedEventString===null||SharedEventString===void 0?void 0:SharedEventString.VideoCanvas_VideoStopped,"CI.Video.Pause");this.checkPlayingState()}},i.prototype.seek=function(n){this._seek(n)},i.prototype.mute=function(){this._player&&(this._player.muted=!0,t.ac(this._muteButton,this._const_muted))},i.prototype.unmute=function(){this._player&&(this._player.muted=!1,t.rc(this._muteButton,this._const_muted))},i.prototype.muteToggle=function(){this._player&&(this._player.muted=!this._player.muted,this._volumeControl.value=this._player.muted?0:this._player.volume,n.prototype.logAndDispatchEvent.call(this,SharedEventString===null||SharedEventString===void 0?void 0:SharedEventString.VideoPlayer_InfoUpdate,"CI.Click",{name:"MuteButton",muted:this._player.muted,volume:this._volumeControl.value}))},i.prototype.updateMuteButtonState=function(){var i,r,u,f,e,o,s,h,c,n;t.sc(this._muteButton,"ctrlbtn ic");c=0;n="";((i=this._player)===null||i===void 0?void 0:i.muted)||((r=this._player)===null||r===void 0?void 0:r.volume)==0?(t.ac(this._muteButton,this._const_muted),n=t.ga(this._muteButton,"data-ariaunmute")):((u=this._player)===null||u===void 0?void 0:u.volume)>0&&((f=this._player)===null||f===void 0?void 0:f.volume)<=.5?(t.ac(this._muteButton,this._const_mid),n=t.ga(this._muteButton,"data-ariamute")):((e=this._player)===null||e===void 0?void 0:e.volume)>.5&&(t.ac(this._muteButton,this._const_high),n=t.ga(this._muteButton,"data-ariamute"));t.sa(this._muteButton,"aria-label",n);typeof((o=this._player)===null||o===void 0?void 0:o.volume)!="number"||((s=this._player)===null||s===void 0?void 0:s.muted)||(c=this._player.volume*100);((h=this._volumeControl_Progress)===null||h===void 0?void 0:h.style)&&(this._volumeControl_Progress.style.width="".concat(c,"%"))},i.prototype.updatePlayerInfo=function(t,i,r,u,f,e,o){r===void 0&&(r=null);u===void 0&&(u=0);f===void 0&&(f=-1);e===void 0&&(e=null);o===void 0&&(o=-1);n.prototype.updatePlayerInfo.call(this,t,i,r,u,f,e,o);this.resetPlayerState()},i.prototype.checkPlayingState=function(){if(this._player){var n="";this._player.paused?(t.ac(this._playButton,this._const_pause),t.rc(this._controls,this._const_hide),n=t.ga(this._playButton,"data-ariaplay")):(t.rc(this._playButton,this._const_pause),t.rc(this._playButton,this._const_end),t.ac(this._controls,this._const_hide),n=t.ga(this._playButton,"data-ariapause"));this._player.duration==this._player.currentTime?(t.ac(this._playButton,this._const_end),n=t.ga(this._playButton,"data-ariareplay")):t.rc(this._playButton,this._const_end);t.sa(this._playButton,"aria-label",n)}},i.prototype.onVideoClick=function(){this._player&&(this._player.paused?this.play():this.pause())},i.prototype.onVideoStart=function(){},i.prototype.onVideoEnd=function(){n.prototype.logAndDispatchEvent.call(this,SharedEventString===null||SharedEventString===void 0?void 0:SharedEventString.VideoCanvas_VideoEnded,"CI.Video.End");t.ac(this._playButton,this._const_end);t.ac(this._playButton,this._const_pause);t.rc(this._controls,this._const_hide)},i.prototype.onVideoTimeUpdate=function(){var n,t,i,r,u,f,e,o;((n=this._player)===null||n===void 0?void 0:n.duration)&&typeof this._player.currentTime!="undefined"&&(this._progressBarTrack&&(this._progressBarTrack.value=this._player.currentTime),((t=this._timeline)===null||t===void 0?void 0:t.style)&&(f=this._player.currentTime/this._player.duration*100,this._timeline.style.width="".concat(f,"%")),this._timeDisplay_Current&&typeof((r=(i=Multimedia===null||Multimedia===void 0?void 0:Multimedia.VideoDetail)===null||i===void 0?void 0:i.TimeFormatUtils)===null||r===void 0?void 0:r.ts2MSS)=="function"&&(e=Math.round(this._player.currentTime),o=(u=Multimedia.VideoDetail)===null||u===void 0?void 0:u.TimeFormatUtils.ts2MSS(e),this._timeDisplay_Current.innerText=o),this.checkPlayingState())},i.prototype.onLoadMetadata=function(){var n,i,r,u,f,e;typeof((n=this._player)===null||n===void 0?void 0:n.duration)=="number"&&(t.sa(this._progressBarTrack,"max",this._player.duration),this._timeDisplay_Duration&&typeof((r=(i=Multimedia===null||Multimedia===void 0?void 0:Multimedia.VideoDetail)===null||i===void 0?void 0:i.TimeFormatUtils)===null||r===void 0?void 0:r.ts2MSS)=="function"&&(f=Math.round(this._player.duration),e=(u=Multimedia.VideoDetail)===null||u===void 0?void 0:u.TimeFormatUtils.ts2MSS(f),this._timeDisplay_Duration.innerText=e))},i.prototype.onTimeLineSeek=function(n){var t,i,r;if((t=n===null||n===void 0?void 0:n.target)===null||t===void 0?void 0:t.value)try{i=n.target.value;r=parseInt(i);this._seek(r)}catch(n){}},i.prototype.onVolumeControl=function(){if(this._volumeControl&&this._player)try{this._player.muted&&this.unmute();this._player.volume=this._volumeControl.value}catch(n){}},i.prototype.onVolumeControl_KeyBoard=function(n){n=n||(_w===null||_w===void 0?void 0:_w.event);var i=n?n.which?n.which:n.keyCode:n.keyCode,t=this._player.volume;try{switch(i){case 40:typeof t=="number"&&t>0&&(t=t-.01);this.stopEventAndPreventDefault(n);break;case 38:typeof t=="number"&&t<1&&(t=t+.01);this.stopEventAndPreventDefault(n)}this._volumeControl.value=t;this._player.volume=this._volumeControl.value}catch(n){}},i.prototype.onVolumeChange=function(){this.updateMuteButtonState()},i.prototype.onFullScreen=function(){this._player&&(typeof this._player.requestFullscreen=="function"?this._player.requestFullscreen():typeof this._player.webkitRequestFullscreen=="function"?this._player.webkitRequestFullscreen():typeof this._player.msRequestFullscreen=="function"&&this._player.msRequestFullscreen(),n.prototype.logAndDispatchEvent.call(this,null,"CI.Click",{name:"FullScreen"}))},i.prototype.onDataLoaded=function(){typeof(sj_evt===null||sj_evt===void 0?void 0:sj_evt.fire)=="function"&&SharedEventString&&sj_evt.fire(SharedEventString.VideoCanvas_LoadedData)},i.prototype.onExitPip=function(){this.checkPlayingState()},i.prototype.onVideoLoaded=function(){this._controls&&t.rc(this._controls,this._const_notAvailable)},i.prototype.onVideoError=function(){},i.prototype.stopEventAndPreventDefault=function(n){sj_pd(n);sj_sp(n)},i}(MMBasePlayerModule.MMBasePlayer);n.MMHtml5Player=i})(MMHtml5PlayerModule||(MMHtml5PlayerModule={}));var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}if(typeof i!="function"&&i!==null)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),__assign=this&&this.__assign||function(){return __assign=Object.assign||function(n){for(var t,r,i=1,u=arguments.length;i<u;i++){t=arguments[i];for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},__assign.apply(this,arguments)},__awaiter=this&&this.__awaiter||function(n,t,i,r){function u(n){return n instanceof i?n:new i(function(t){t(n)})}return new(i||(i=Promise))(function(i,f){function o(n){try{e(r.next(n))}catch(t){f(t)}}function s(n){try{e(r["throw"](n))}catch(t){f(t)}}function e(n){n.done?i(n.value):u(n.value).then(o,s)}e((r=r.apply(n,t||[])).next())})},__generator=this&&this.__generator||function(n,t){function o(n){return function(t){return s([n,t])}}function s(o){if(e)throw new TypeError("Generator is already executing.");while(f&&(f=0,o[0]&&(r=0)),r)try{if(e=1,u&&(i=o[0]&2?u["return"]:o[0]?u["throw"]||((i=u["return"])&&i.call(u),0):u.next)&&!(i=i.call(u,o[1])).done)return i;(u=0,i)&&(o=[o[0]&2,i.value]);switch(o[0]){case 0:case 1:i=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++;u=o[1];o=[0];continue;case 7:o=r.ops.pop();r.trys.pop();continue;default:if(!(i=r.trys,i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){r.label=o[1];break}if(o[0]===6&&r.label<i[1]){r.label=i[1];i=o;break}if(i&&r.label<i[2]){r.label=i[2];r.ops.push(o);break}i[2]&&r.ops.pop();r.trys.pop();continue}o=t.call(n,r)}catch(s){o=[6,s];u=0}finally{e=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},e,u,i,f;return f={next:o(0),"throw":o(1),"return":o(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f},__spreadArray=this&&this.__spreadArray||function(n,t,i){if(i||arguments.length===2)for(var r=0,f=t.length,u;r<f;r++)!u&&r in t||(u||(u=Array.prototype.slice.call(t,0,r)),u[r]=t[r]);return n.concat(u||Array.prototype.slice.call(t))},MMEmbedPlayerModule;(function(n){var i="undefined",r="object",u="function",f="MMEmbedPlayer",t=typeof pMMUtils!=i?pMMUtils:null,e=function(n){function e(i,r,u,f,e,o,s,h){e===void 0&&(e=0);o===void 0&&(o=-1);s===void 0&&(s=null);h===void 0&&(h=-1);var c=n.call(this,i,r,u,f,e,o,s,h)||this;return c.isTestHooksEnabled=typeof(t===null||t===void 0?void 0:t.isTest)=="function"?t.isTest():!1,c.isMockImageEnabled=typeof(t===null||t===void 0?void 0:t.qsv)=="function"?t.qsv("mockimages")==="1":!1,c.init=c.init.bind(c),c._playerInfoUpdate=c._playerInfoUpdate.bind(c),c._fireIFrameLoaded=c._fireIFrameLoaded.bind(c),c}return __extends(e,n),e.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(){return this.createElement(),t=this.createEmbedPlayerPayload(),sj_evt.fire(SharedEventString.EmbedPlayer_ComponentMount,t),n.prototype.init.call(this),this._initVideoInstModule(),this.bindEvents(),[2]})})},e.prototype.bindEvents=function(){sj_evt.bind(SharedEventString.VideoPlayer_InfoUpdate,this._playerInfoUpdate)},e.prototype.createElement=function(){var t,r,n;if(!this._parentElement||!this._embedInfo)return null;r=this._embedInfo.embedHtml;this._embedInfo.embedScript&&(r+=this._embedInfo.embedScript);this._parentElement.innerHTML=r;n=this._parentElement.querySelector("iframe");this.isTestHooksEnabled&&this.isMockImageEnabled&&(n=this._parentElement.querySelector("img"));n&&(n.onload=this._fireIFrameLoaded,typeof iframeUtils!=i&&typeof(iframeUtils===null||iframeUtils===void 0?void 0:iframeUtils.vms)=="function"&&(n.src=iframeUtils.vms(n.src,(t=this._initState)===null||t===void 0?void 0:t.m)))},e.prototype._fireIFrameLoaded=function(){if(SharedEventString&&typeof sj_evt.fire=="function"){var t=this.createEmbedPlayerPayload();sj_evt.fire(SharedEventString.EmbedPlayer_Load,t);typeof(_w===null||_w===void 0?void 0:_w.dispatchEvent)=="function"&&typeof CustomEvent!="undefined"&&_w.dispatchEvent(new CustomEvent(SharedEventString.VideoCanvas_OnLoad));this._dbgTrace("iframe loaded",SharedEventString.EmbedPlayer_Load,t)}n.prototype.onLoad.call(this)},e.prototype._dbgTrace=function(n){for(var i=[],t=1;t<arguments.length;t++)i[t-1]=arguments[t];"object"===r&&"object"===u},e.prototype.play=function(){!this._player},e.prototype.pause=function(){!this._player},e.prototype.seek=function(n){this._seek(n)},e.prototype.updatePlayerInfo=function(t,i,r,u,f,e,o){if(r===void 0&&(r=null),u===void 0&&(u=0),f===void 0&&(f=-1),e===void 0&&(e=null),o===void 0&&(o=-1),n.prototype.updatePlayerInfo.call(this,t,i,r,u,f,e,o),this.createElement(),SharedEventString&&typeof sj_evt.fire=="function"){var s=this.createEmbedPlayerPayload();sj_evt.fire(SharedEventString===null||SharedEventString===void 0?void 0:SharedEventString.EmbedPlayer_ComponentUpdate,s);this._dbgTrace("component updated")}this._initVideoInstModule()},e.prototype.createEmbedPlayerPayload=function(){var n,t=__assign({playerConfig:this._config,videoDuration:this._duration},this._instInfo),i=(n=this._instInfo.extraStaticInfo)===null||n===void 0?void 0:n.videoId;return i&&(t.playerKey=i),t},e.prototype._initVideoEventInst=function(){SharedEventString&&typeof sj_evt.fire=="function"&&(sj_evt.fire(SharedEventString.VideoEvent_ModuleInit,this._instInfo),this._dbgTrace("init video event insts"))},e.prototype._seek=function(n){typeof(sj_evt===null||sj_evt===void 0?void 0:sj_evt.fire)=="function"&&SharedEventString&&sj_evt.fire(SharedEventString.EmbedPlayer_SeekTime,{seekTime:n/1e3,enableSeekAhead:!0,enableSeekBack:!0})},e.prototype._playerInfoUpdate=function(n){if(n&&!(n.length<2)&&n[1]){var t=n[1];this.checkVideoEnd(t.currentTime)}},e.prototype.checkVideoEnd=function(n){this._endTime>0&&typeof n=="number"&&Math.abs(n-this._endTime)<1&&sj_evt.fire(SharedEventString===null||SharedEventString===void 0?void 0:SharedEventString.VideoCanvas_VideoEnded)},e.prototype._initVideoInstModule=function(){var n,t,i,r,u,f;((i=(t=(n=this._config)===null||n===void 0?void 0:n.instc)===null||t===void 0?void 0:t.eil)===null||i===void 0?void 0:i.indexOf("Seen"))!=-1&&this._initVideoEventInst();((f=(u=(r=this._config)===null||r===void 0?void 0:r.instc)===null||u===void 0?void 0:u.eil)===null||f===void 0?void 0:f.indexOf("CI"))!=-1&&this.initIsCIModule()},e.prototype.initIsCIModule=function(){var n,t,i,r,u,f,e={bindEventSupportedList:(t=(n=this._config)===null||n===void 0?void 0:n.instc)===null||t===void 0?void 0:t.ecietl,videoType:this._embedInfo?"video":"",videoExtraInfo:__assign({videoPosition:(i=this._instInfo.extraStaticInfo)===null||i===void 0?void 0:i.videoPosition,videoId:(r=this._instInfo.extraStaticInfo)===null||r===void 0?void 0:r.videoId},this._instInfo),videoEventsConfig:(f=(u=this._config)===null||u===void 0?void 0:u.instc)===null||f===void 0?void 0:f.vevtc};SharedEventString&&typeof(sj_evt===null||sj_evt===void 0?void 0:sj_evt.fire)=="function"&&sj_evt.fire(SharedEventString.VideoCanvas_InitIsCIModule,e)},e}(MMBasePlayerModule.MMBasePlayer);n.MMEmbedPlayer=e})(MMEmbedPlayerModule||(MMEmbedPlayerModule={})),function(n){var t=function(){function n(n,t,i,r,u,f,e,o){u===void 0&&(u=0);f===void 0&&(f=-1);e===void 0&&(e=null);o===void 0&&(o=-1);var s,h;if(this._utils=pMMUtils!=null&&typeof pMMUtils!="undefined"?pMMUtils:null,this.isTestHooksEnabled=typeof((s=this._utils)===null||s===void 0?void 0:s.isTest)=="function"?this._utils.isTest():!1,this.isMockImageEnabled=typeof((h=this._utils)===null||h===void 0?void 0:h.qsv)=="function"?this._utils.qsv("mockimages")==="1":!1,!(n===null||n===void 0?void 0:n.embedType))throw new Error("No enough info to create a MMPlayer");this._startTime=u;this.createPlayer(n,t,i,r,u,f,e,o)}return n.prototype.init=function(){this._player&&this._player.init()},n.prototype.getPlayer=function(){return this._player},n.prototype.createPlayer=function(n,t,i,r,u,f,e,o){u===void 0&&(u=0);f===void 0&&(f=-1);e===void 0&&(e=null);o===void 0&&(o=-1);n.embedHtml=this.mockImageHtmlCustomWidthAndHeight(n.embedHtml,t===null||t===void 0?void 0:t.clientWidth,t===null||t===void 0?void 0:t.clientHeight);switch(n.embedType){case"HLS":this._player=new MMHtml5PlayerModule.MMHtml5Player(n,t,i,r,u,f,e,o);break;case"IFrame":this._player=new MMEmbedPlayerModule.MMEmbedPlayer(n,t,i,r,u,f,e,o);break;case"Html5Video":this._player=new MMHtml5PlayerModule.MMHtml5Player(n,t,i,r,u,f,e,o)}},n.prototype.updatePlayerInfo=function(n,t,i,r,u,f,e,o){var s,h;u===void 0&&(u=0);f===void 0&&(f=-1);e===void 0&&(e=null);o===void 0&&(o=-1);n.embedHtml=this.mockImageHtmlCustomWidthAndHeight(n.embedHtml,t===null||t===void 0?void 0:t.clientWidth,t===null||t===void 0?void 0:t.clientHeight);((h=(s=this._player)===null||s===void 0?void 0:s.getEmbedInfo())===null||h===void 0?void 0:h.embedType)!=n.embedType?(this.createPlayer(n,t,i,r,u,f,e,o),this.init()):this._player.updatePlayerInfo(n,r,t,u,f,e,o)},n.prototype.mockImageHtmlCustomWidthAndHeight=function(n,t,i){var f,e,o=n,r,u;return!this.isTestHooksEnabled||!this.isMockImageEnabled?o:(r=typeof((f=this._utils)===null||f===void 0?void 0:f.qsv)=="function"?this._utils.qsv("mockimagewidth"):null,u=typeof((e=this._utils)===null||e===void 0?void 0:e.qsv)=="function"?this._utils.qsv("mockimageheight"):null,r=r?r:t!==null&&t!==void 0?t:"16",u=u?u:i!==null&&i!==void 0?i:"9",isNaN(r)||isNaN(u)||(o='<img src="/snrtest/image?width='.concat(r,"&height=").concat(u,'" width="').concat(r,'" height="').concat(u,'" alt="Video Player">')),o)},n}();n.MMPlayer=t}(MMPlayerModule||(MMPlayerModule={}))